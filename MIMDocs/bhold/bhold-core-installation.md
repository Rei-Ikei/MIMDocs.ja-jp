---
title: "BHOLD コアのインストール | Microsoft Docs"
description: "BHOLD スイートのインストールに関する主要なドキュメント"
keywords: 
author: barclayn
ms.author: barclayn
manager: mbaldwin
ms.date: 09/07/2017
ms.topic: article
ms.service: microsoft-identity-manager
ms.technology: security
ms.assetid: 
ms.openlocfilehash: 33fbe63528d5d7c543ae286f934654538782b4d5
ms.sourcegitcommit: 2be26acadf35194293cef4310950e121653d2714
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/14/2017
---
# <a name="bhold-core-installation"></a>BHOLD コアのインストール

BHOLD コア モジュールには、環境内の BHOLD スイートの主な機能が用意されています。 BHOLD コア モジュールは、他の BHOLD スイート モジュールをインストールする前に、ローカル エリア ネットワーク内のサーバーにインストールし、構成する必要があります。

## <a name="bhold-core-installation-requirements"></a>BHOLD コアのインストール要件

BHOLD コア モジュールは、Microsoft BHOLD スイートの基盤となります。 この BHOLD コア モジュールは、他の Microsoft BHOLD スイート モジュールの前にインストールする必要があります。

### <a name="bhold-core-hardware-requirements"></a>BHOLD コアのハードウェア要件

BHOLD コア モジュールは、Microsoft BHOLD スイートの基盤となります。 この BHOLD コア モジュールは、他の Microsoft BHOLD スイート モジュールの前にインストールする必要があります。

|          |        |          |
|----------|--------|----------|
|**コンポーネント** |**最小** | **推奨** |
|プロセッサ | 64 ビット プロセッサ | マルチコア 64 ビット プロセッサ |
| メモリ |3 GB | 6 GB 以上 |
|記憶域| 30 GB 利用可能 |デプロイのサイズによって異なります |
|ネットワーク アダプター| SQL および Forefront Identity Manager (FIM) サーバーへの 100 Mbps 接続 | SQL および FIM サーバーへの 1 Gbps 接続|

この推奨事項は一般的な実装に基づいており、サーバーで実行されている他のアプリケーションは考慮されません。 環境によっては、より高性能なコンポーネントが必要になる場合があります。

### <a name="bhold-core-software-requirements"></a>BHOLD コアのソフトウェア要件

BHOLD コア モジュールは、次の要件を満たすコンピューターにインストールできます。

- サーバーで Windows Server 2012 (64 ビット)、Windows Server 2016 が実行されている必要があります 
- サーバーが Active Directory Domain Services (AD DS) ドメインのメンバーである必要があります。 テスト環境では、サーバーは、AD DS ドメイン コントローラーの場合があります。
- サーバーと同じドメインのアカウントでログオンしたユーザーによって BHOLD コアがインストールされており、アカウントは、そのドメインの Domain Admins グループとサーバーの Administrators グループに属している必要があります。
- Microsoft インターネット インフォメーション サービス (IIS) と ASP.NET がサーバーにインストールされている必要があります。 IIS では Windows 認証を有効にして構成する必要があります。 BHOLD コアを Windows Server 2012/2016 にインストールする場合は、IIS 6 管理互換をインストールする必要があります。 BHOLD コアを Windows Server 2012 にインストールする場合は、IIS 6 スクリプト ツールをインストールする必要があります
- .NET Framework 3.5 がインストールされている必要があります。
  - BHOLD コアには .NET 3.5 が必要であるため、Server Core にはインストールできません。
- 他の BHOLD モジュールによって Silverlight 4 が必要とされているため、BHOLD コアの前にこの Silverlight 4 をインストールすることをお勧めします。
- Microsoft SQL Server 2014 または Microsoft SQL Server 2016 が、BHOLD コア サーバーまたは LAN 上の別のサーバーにインストールされている必要があります。 

Windows クライアント コンピューターで、Microsoft Internet Explorer バージョン 6 以降、および Microsoft Silverlight バージョン 4 以降が実行されている必要があります。

## <a name="before-you-begin"></a>始める前に

BHOLD コア モジュールには、サーバーおよび他のネットワーク エンティティに対する BHOLD コア サービスの認証と承認に使用したユーザー アカウントが必要です。 このセクションでは、そのユーザー アカウントを作成および構成する方法を説明し、BHOLD コアのセットアップの完了に必要な情報の収集を支援するプレインストール ワークシートを提供します。

>{!重要} BHOLD コアをインストールするときに、既存の SQL Server データベースを BHOLD コア データベースとして使用するか、BHOLD コア セットアップ ウィザードで BHOLD コア データベースを作成することができます。 既存のデータベースを使用する場合は、BHOLD コアのインストール中、他のユーザーがそのデータベースにアクセスできないようにする必要があります。 BHOLD コアをインストールする前に、SQL Server データベースのアクセス制御によって、BHOLD コアをインストールしているユーザー以外によるアクセスが許可されていないことを確認します。

## <a name="required-user-and-group"></a>必要なユーザーとグループ

BHOLD コア モジュールは、2 つの特定のセキュリティ グループ (BHOLD コア モジュール用に作成されたセキュリティ グループを含む) のメンバーである、その目的専用のユーザー アカウントを使用してドメインにログオンできる必要があります。 この手順を実行するには、Domain Admins グループのメンバーシップが必要です。
**BHOLD コア ユーザーとセキュリティ グループを作成および構成するには**

1.  ドメイン コントローラーで、**[スタート]** をクリックし、**[管理ツール]** をポイントして、**[Active Directory ユーザーとコンピューター]** をクリックします。

2.  コンソール ツリーで、アカウントを作成するドメインを展開し、**[ユーザー]** を右クリックして **[新規作成]** をポイントし、**[グループ]** をクリックします。

3.  **[新しいオブジェクト - グループ]** ダイアログ ボックスの **[グループ名]** で、グループの名前 (BHOLD の既定: BHOLDApplicationGroup) を入力し、**[OK]** をクリックします。

4.  **[Users]**を右クリックし、 **[新規作成]**をポイントして、 **[ユーザー]**をクリックします。

5.  **[フル ネーム]** に、アカウントを特定するための名前 (BHOLD コア サービス アカウントなど) を入力します。

6.  **[ユーザー ログオン名]** に、BHOLD コア サービス アカウントのユーザー名 (BHOLD の既定: b1user) を入力し、**[次へ]** をクリックします。

7.  **[パスワード]** と **[パスワードの確認入力]** に、サービス アカウントのパスワードを入力します。

8.  **[ユーザーは次回ログオン時にパスワード変更が必要]** をオフにし、**[ユーザーはパスワードを変更できない]** および **[パスワードを無期限にする]** をオンにして、**[次へ]** をクリックした後、**[完了]** をクリックします。

9.  コンソールの結果ウィンドウで該当するユーザー アカウントを右クリックし、**[グループに追加]** をクリックします。

10. **[グループの選択]** ダイアログ ボックスで、前に作成したグループの表示名を入力し、セミコロン (;) を入力した後、「IIS_IUSRS」と入力します。

11. **[名前の確認]**、**[OK]** の順にクリックします。  

次の手順は、BHOLD コア モジュールをインストールするコンピューターで実行します。 この手順を実行するには、Domain Admins グループのメンバーとしてログインする必要があります。

## <a name="bhold-core-installation-worksheet"></a>BHOLD コア インストールのワークシート

BHOLD コア モジュールのインストールを開始する前に、BHOLD コア セットアップ ウィザードでのインストールに必要な情報を準備する必要があります。 次のワークシートを使用すると、こうした情報を必要に応じて指定できるように、記録しておくことができます。 各セクションが、BHOLD コア セットアップ ウィザードのページに対応します。

### <a name="account-settings"></a>アカウント設定

| **項目**                                    | **説明**                                                                                                                                                                                                                                                                                             | **値**                                                                                                                                                          |
|---------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **ドメイン/マシンでセキュリティ プロバイダーを使用する** | オンにすると、Active Directory Domain Services セキュリティによって BHOLD コアへのアクセスが制御されます。                                                                                                                                                                                                  | チェック ボックスをオンにします。 **重要:** このチェック ボックスをオフにすると、インストールは失敗します。                                                                 |
| **ドメイン**                                  | BHOLD サーバー、サービス アカウント、およびアプリケーション グループを含むドメインを指定します。 **重要:** 完全修飾ドメイン名 (FQDN) ではなく、NetBIOS 名 (短い名前) を使用してドメイン名を指定します。 たとえば、ドメインの FQDN が fabrikam.com の場合、ドメイン名は CONTOSO として指定します。 | ここにドメイン名を入力します。                                                                                                                                        |
| **アプリケーション グループ**                       | 事前に「[必要なユーザーとグループ](https://technet.microsoft.com/en-us/library/jj134095(v=ws.10).aspx#rug)」で作成したセキュリティ グループの名前を指定します。                                                                                                                                  | ここにグループ名を入力します。                                                                                                                                         |
| **サービス ユーザー**                            | 「[必要なユーザーとグループ](https://technet.microsoft.com/en-us/library/jj134095(v=ws.10).aspx#rug)」で前に作成したサービス ユーザー アカウントのログオン名を指定します。                                                                                                                      | ここにユーザー アカウント名を入力します。                                                                                                                                  |
| **パスワード**                                | BHOLD コア サービスのユーザー アカウントのパスワードを指定します。                                                                                                                                                                                                                                              | ここにパスワードを入力します。**重要:** このパスワードは、セキュリティで保護された非表示の場所に保管してください。                                                                |
| **Web サイト IP/ポート**                         | イントラネット サーバーに作成する Web サイトの IP アドレスとポート番号を指定します。 既定値 (\*) は、既定の Web サイトと同じ IP アドレスを使用しない場合にのみ変更します。 ポート番号は、既定のポート (5151) が既に使用されている場合のみ、使用可能なポートに変更します。             | 既定の Web サイトで既定以外の IP アドレスが使用されている場合は、ここに入力します。既定のポート番号が既に使用されている場合は、ここに BHOLD Web サイトのポート番号を入力します。 |

### <a name="database-settings"></a>データベース設定

| **項目**                                       | **説明**                                                                                                                                                                                                                                                           | **値**                                                                                                                                                                                                                                                                                                                                                                                             |
|------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **統合セキュリティを使用する**                    | データベースへのアクセスに Windows 認証が使用されます。                                                                                                                                                                                                     | Windows 認証を使用して SQL Server に接続する場合に、このチェック ボックスをオンにします。 SQL Server 認証を使用する場合は、このチェック ボックスをオフにします。 SQL Server 認証を使用している場合、データベースは、BHOLD コア セットアップを実行する前に作成しておく必要があります。 **注:** Windows 認証を使用する場合は、データベース サーバーで sysadmin サーバー ロールを持つアカウントでログオンする必要があります。 |
| **データベース ユーザー**と**データベース パスワード** | データベース サーバーで sysadmin サーバー ロールを持つユーザーのユーザー名とパスワードを指定します。 この値は、SQL Server 認証が使用されている場合にのみ指定されます。                                                                                               | ここに SQL Server ユーザー名を入力します。ここに SQL Server ユーザー パスワードを入力します。**注:** このパスワードは、セキュリティで保護された非表示の場所に保管してください。                                                                                                                                                                                                                                                  |
| **データベース サーバー**と**データベース名**   | データベース サーバーの NetBIOS 名と、BHOLD コア セットアップで作成されるデータベースの名前 (既定: b1) を指定します。 既定のデータベース サーバー インスタンスを使用していない場合は、*\<server\>*\\*\<instance\>* 形式でデータベース サーバー インスタンスを指定します。 | ここにサーバー (またはサーバーとインスタンス) 名を入力します。ここにデータベース名を入力します。                                                                                                                                                                                                                                                                                                                   |
| **データベース ユーザーの制限を加える**    | 使われていません。                                                                                                                                                                                                                                                                 | 既定値を変更しないでください                                                                                                                                                                                                                                                                                                                                                                       |
|                                                |                                                                                                                                                                                                                                                                           |                                                                                                                                                                                                                                                                                                                                                                                                       |
|                                                |                                                                                                                                                                                                                                                                           |                                                                                                                                                                                                                                                                                                                                                                                                       |

## <a name="bhold-core-setup"></a>BHOLD コア セットアップ

BHOLD コア モジュールをインストールするには、Domain Admins グループのメンバーとしてログオンし、次のファイルをダウンロードして、BHOLD コア モジュールをインストールするサーバーで管理者として実行します。 

- BholdCore *\<Version\>*\_Release.msi

*\<Version\>* は、インストールする BHOLD コア リリースのバージョン番号に置き換えてください。

管理者としてプログラム ファイルを実行するには、そのファイルを右クリックし、**[管理者として実行]** をクリックします。

### <a name="postinstallation-settings"></a>インストール後の設定

BHOLD コア セットアップが完了したら、Windows ファイアウォールを構成し、インターネット インフォメーション サービスで BHOLD コア アプリケーション プールの詳細設定を変更して、BHOLD コア構成を完了する必要があります。 必要に応じて、要件を満たすように BHOLD システム属性を変更する必要もあります。

#### <a name="configuring-windows-firewall"></a>Windows ファイアウォールの構成

ユーザーがリモート コンピューターの Web ブラウザーを使用して BHOLD にアクセスする場合は、BHOLD コアのインストール時に指定した Web サイト ポートへの受信接続を許可するように、BHOLD コア サーバーの Windows ファイアウォールを構成する必要があります。

この手順を実行するには、ローカル コンピューターの管理者グループのメンバーである必要があります。

#### <a name="to-permit-incoming-connections-to-the-bhold-website"></a>BHOLD Web サイトへの受信接続を許可するには

1.  **[スタート]** をクリックし、**[管理ツール]** をポイントして **[セキュリティが強化された Windows ファイアウォール]** を右クリックし、**[管理者として実行]** をクリックします。

2.  左側のウィンドウで **[受信の規則]** をクリックし、右側のウィンドウで **[新しい規則]** をクリックします。

3.  新規の受信の規則ウィザードで、**[ポート]**、**[次へ]** の順にクリックします。

4.  **TCP** が選択されていることを確認し、**[特定のローカル ポート]** に、既定の BHOLD コア ポート番号 (5151)、または BHOLD コアをインストールしたときに指定したポート番号を入力し、**[次へ]** をクリックします。

5.  **[接続を許可する]** がオンになっていることを確認し、**[次へ]** をクリックします。

6.  **[プロファイル]** ページで、BHOLD Web サイトにアクセスできないようにする場所のチェック ボックスをオフにし、**[次へ]** をクリックします。

7.  **[名前]** ページで、規則の名前 ("BHOLD コアへの受信接続を許可" など) を入力し、**[完了]** をクリックします。  

#### <a name="enabling-32-bit-applications-for-the-bhold-core-application-pool"></a>BHOLD コア アプリケーション プールの 32 ビット アプリケーションの有効化

IIS が BHOLD コア モジュールで正しく動作できるようにするには、32 ビット アプリケーションをサポートするように BHOLD コア アプリケーション プールを構成します。 この手順を実行するには、BHOLD コア モジュールのインストールに使用したアカウントでログインする必要があります。

**BHOLD コア アプリケーション プールの 32 ビット アプリケーション サポートを有効にするには**

1.  インターネット インフォメーション サービス マネージャーを開くには、**[スタート]** をクリックし、**[管理ツール]** をポイントして、**[インターネット インフォメーション サービス (IIS) マネージャー]** をクリックします。

2.  コンソール ツリーで、サーバー名を展開し、**[アプリケーション プール]** をクリックします。

3.  **[アプリケーション プール]** ボックスの一覧で **[CoreAppPool]** を右クリックし、**[詳細設定]** をクリックします。

4.  **[詳細設定]** ダイアログ ボックスで、**[32 ビット アプリケーションの有効化]** ボックスの一覧で **[True]** を選択し、**[OK]** をクリックします。

#### <a name="establishing-the-service-principal-name-for-the-bhold-website"></a>BHOLD Web サイトのサービス プリンシパル名の設定

BHOLD Web サイトへの接続に使用されるネットワーク名がサーバー ホスト名と同じでない場合は、HTTP のサービス プリンシパル名 (SPN) を設定する必要があります。 たとえば、DNS で CNAME リソース レコードを使用してサーバーの別名を指定する場合、またはネットワーク負荷分散を使用する場合は、Active Directory でこうした追加ネットワーク アドレスを登録しなければなりません。 これを行わないと、Internet Explorer が、BHOLD Web サイトに接続するときに Kerberos プロトコルを使用できません。

>[!IMPORTANT]
BHOLD コア モジュールが、FIM ポータルと同じコンピューターにインストールされている場合は、BHOLD コアを実行しているサーバーと FIM ポータルを実行しているサーバーでは、別のホスト名を使用して DNS リソース レコード (CNAME または A) を作成する必要があります。 特定のサービスの種類/サーバー別名のペアについては、設定できる SPN は 1 つだけです。また、BHOLD コアと FIM ポータルは、通常、別個のアカウントで実行されるため、個別の SPN が必要です。 SPN が別のアカウントで既に設定されている場合は、setspn コマンドによりエラーが報告されます。

この手順を完了するには、少なくとも、**Domain Admins** グループ、またはそれと同等の権限を持つグループのメンバーである必要があります。

#### <a name="to-establish-the-spn-of-the-bhold-website"></a>BHOLD Web サイトの SPN を設定するには

1.  Active Directory Domain Services ドメイン コントローラーで、**[スタート]**、**[すべてのプログラム]**、**[アクセサリ]** の順にクリックし、**[コマンド プロンプト]** を右クリックして、**[管理者として実行]** をクリックします。

2.  コマンド プロンプトで、次のコマンドを入力して Enter キーを押します: setspn –S HTTP/ *\<networkalias\> \<domain\>* \\ *\<accountname\>*

    -   *\<networkalias\>* は、クライアントが BHOLD Web サイトに接続するときに使用するアドレスです

    -   *\<domain\>*\\*\<accountname\>* は、BHOLD コアをインストールしたときに作成した、BHOLD コア サービス アカウントのドメインとユーザー名です。

3.  クライアントが BHOLD Web サイトに接続するときに使用するすべての名前 (CNAME 別名、完全修飾ドメイン名を含む名前、NetBIOS ドメイン名 (短い名前) など) に対して、前の手順を繰り返します。

#### <a name="setting-bhold-system-attributes"></a>BHOLD システム属性の設定

BHOLD コア モジュールが適切にインストールされたことを検証するには、BHOLD コア ポータルを開き、システム属性を表示します。 環境内で BHOLD コア モジュールが適切に機能していることを確認するために、必要に応じて、次の BHOLD システム属性を変更することもできます。

| **属性**                | **説明**                                                                                                                                                                                                                                                                                                      |
|------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **NoHistory**                | BHOLD Web サイトがクラスター化された Web サービスで実行されており、最近表示された項目が適切に動作していることを確認する場合は Y に設定します。 BHOLD Web サイトがスタンドアロンの IIS サーバーで実行されている場合は N に設定します。                                                                                                                      |
| **MoveorgunitToSameorgtype** | Y を設定すると、組織単位 (orgunit) は、親 orgunit と同じ組織タイプの orgunit にのみに移動できます。 たとえば、プロジェクト orgunit を部門 orgunit に移動することはできません。 N に設定すると、orgunit を別のタイプの orgunit に配置できます。 |
| **ABA 実行間隔 (日)**     | 属性ベースの承認 (ABA) 実行間隔 (日) を指定する 2 桁の整数を設定します。 たとえば、ABA を 2 日おきに実行するように指定するには、「02」と入力します。                                                                                                                     |
| **ABA 実行の開始時刻**    | 属性ベースの承認を実行する時刻を指定する 2 桁の整数を設定します。 たとえば、午後 11 時 00 分 (23:00) に ABA を実行するように指定するには、 「23」と入力します。                                                                                                             |
| **システム基数**       | BHOLD でシステム基数チェックが不要な場合は N に設定します。 既定値は Y です。                                                                                                                                                                                                                             |
| **ログ記録**                  | 変更を記録しない場合は N に設定します。 既定値は Y です。                                                                                                                                                                                                                                            |
| **SystemQueue 処理**   | システム キュー処理が不要な場合は N に設定します。 製品サポートからの指示がない限り、この値は変更しないでください。                                                                                                                                                                                           |

この手順を実行するには、Domain Admins グループのメンバーとしてログインする必要があります。

**BHOLD システム属性を設定するには**

1.  **[スタート]**、**[すべてのプログラム]**、**[Internet Explorer]** の順にクリックします。

2.  アドレス ボックスで、次のように入力します。ここで、*\<server\>* は、BHOLD Web サイト サーバーの名前です。*\<port\>* は、Web サイトにバインドされたポート番号です。

3.  **[ホーム]**、**[値]**、**[変更]** の順にクリックします。

4.  変更する属性の名前を検索し、属性名の横にあるボックスに新しい値を入力して、**[OK]** をクリックします。

## <a name="next-steps"></a>次のステップ

BHOLD コアをインストールし、適切にインストールされたこをと検証したら、その他のモジュールをインストールできます。 この時点では、BHOLD データベースは実質的には空で、1 つのユーザー アカウント、ルート アカウント、1 つの組織単位 (orgunit)、ルート orgunit のみが含まれます。 BHOLD データベースにユーザーを追加するには、必要に応じて、Access Management Connector モジュールまたは BHOLD Model Generator モジュールをインストールします。 Access Management Connector モジュールを使用すると、FIM 同期サービスからユーザー データをインポートできます。また、BHOLD Model Generator を使用すると、一連の構造化ファイルからユーザー データをインポートできます。 Access Management Connector モジュールの使用の詳細については、「[Test Lab Guide: BHOLD Access Management Connector](https://technet.microsoft.com/en-us/library/jj853085(v=ws.10).aspx)」 (テスト ラボ ガイド: BHOLD Access Management Connector) をご覧ください。

BHOLD Model Generator モジュールの使用の詳細については、次を参照してください。

- [Microsoft BHOLD Suite 概念ガイド](https://technet.microsoft.com/en-us/library/jj134102(v=ws.10).aspx)
- [Microsoft BHOLD スイート テクニカル リファレンス](https://technet.microsoft.com/en-us/library/jj134935(v=ws.10).aspx)
